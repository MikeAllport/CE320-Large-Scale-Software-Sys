import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.filechooser.FileFilter;
import javax.swing.filechooser.FileNameExtensionFilter;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public class ButtonHandler implements ActionListener
{
    private String option;
    private CollageMakerApplication frame;
    public ButtonHandler(String option, CollageMakerApplication frame)
    {
        this.option = option;
        this.frame = frame;
    }
    @Override
    public void actionPerformed(ActionEvent e)
    {
        switch (option)
        {
            case "loadImage":
                JFileChooser c = new JFileChooser(".");
                c.setMultiSelectionEnabled(true); //allow multiple files
                c.showOpenDialog(frame);
                //retrieve files selected by the user
                File[] files = c.getSelectedFiles(); //get files loaded
                for (File f : files) {
                    BufferedImage image = null;
                    try {
                        image = ImageIO.read(f);
                    } catch (IOException ioException) {
                        ioException.printStackTrace();
                    }
                    frame.images.add(image);  //save images in list
                }
                FileFilter imageFilter = new FileNameExtensionFilter("Image files", ImageIO.getReaderFileSuffixes()); //get all image file filters
                c.setFileFilter(imageFilter); //setting file filter
                // Demonstrate "Open" dialog:
                int rVal = c.showOpenDialog(frame);
                if (rVal == JFileChooser.APPROVE_OPTION) { //user approves
//            super.filename.setText(c.getSelectedFile().getName());
//            dir.setText(c.getCurrentDirectory().toString());
                }
                if (rVal == JFileChooser.CANCEL_OPTION) { //user cancels
//            filename.setText("User has cancelled.");
//            dir.setText("Default Directory");
                }
                break;
            case "deleteImage":
                System.out.println("CODE WILL DELETE IMAGE");
                break;
            case "help":
                System.out.println("CODE WILL SHOW BRIEF INSTRUCTIONS ON HOMEPAGE");
                break;
            case "customiseCollage":
                System.out.println("CODE WILL ALLOW USER TO CUSTOMISE A COLLAGE FROM SCRATCH - FOR FUTURE ITERATIONS");
                break;
            case "generateCollage":
                CollagePreview_Page collagepreview_page = new CollagePreview_Page();
                frame.setDisplay(collagepreview_page);
                System.out.println("CODE WILL GENERATE A COLLAGE BASED ON THE IMAGES THAT ARE LOADED AND GO TO THE NEXT PAGE TO PREVIEW 4-5 COLLAGES");
                break;
        }

    }
}
