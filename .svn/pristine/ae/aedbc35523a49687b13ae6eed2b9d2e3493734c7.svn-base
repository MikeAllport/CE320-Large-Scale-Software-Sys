package group9.button_handling;

import group9.CollageMakerApplication;
import group9.utils.Utils;
import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public class DisplaySelectedImageHandler implements ListSelectionListener {

    private final CollageMakerApplication theApp;
    private final JLabel image;
    private final JList<File> filesList;

    public DisplaySelectedImageHandler(CollageMakerApplication theApp, JLabel image, JList<File> filesList) {
        this.theApp = theApp;
        this.image = image;
        this.filesList = filesList;
    }

    public void valueChanged(ListSelectionEvent e) {
        BufferedImage img = null;
        try {
            //when no item is selected
            if (filesList.getSelectedValue() == null) {
                image.setIcon(null);
                image.setText(null);
            } else { //When there is an item selected
                img = ImageIO.read(theApp.getFileFromName(filesList.getSelectedValue().getName()));
                img = Utils.rescaleIcon(img, 400, 400);
                ImageIcon testIcon = new ImageIcon(img);
                image.setIcon(testIcon);
                image.setText(filesList.getSelectedValue().getName());
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
}