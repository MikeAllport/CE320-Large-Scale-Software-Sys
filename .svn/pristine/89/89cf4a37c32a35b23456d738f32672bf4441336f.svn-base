import java.awt.*;
import java.awt.image.BufferedImage;
import java.util.ArrayList;

public class BinaryTreeNodeBufferedImage {
    Point position; // normalized
    Dimension size;
    Bounds bounds;
    BufferedImage image;
    BinaryTreeNodeBufferedImage leftChild, rightChild;

    BinaryTreeNodeBufferedImage(Point point, BufferedImage image, Dimension size)
    {
        this.bounds = new Bounds(point, size);
        this.image = image;
        this.position = point;
        this.size = size;
    }

    public ArrayList<BufferedImageWithBounds> getImages()
    {
        ArrayList<BufferedImageWithBounds> images = new ArrayList<>();
        images.addAll(getImagesRecursive());
        return images;
    }

    private ArrayList<BufferedImageWithBounds> getImagesRecursive()
    {
        ArrayList<BufferedImageWithBounds> images = new ArrayList<>();
        if (leftChild == null && rightChild == null) {
            BufferedImageWithBounds collageImage = new BufferedImageWithBounds(this.image, this.bounds);
            images.add(collageImage);
            return images;
        }
        images.addAll(leftChild.getImagesRecursive());
        images.addAll(rightChild.getImagesRecursive());
        return images;
    }

    boolean isOverlap(Point point)
    {
        // simple AABB check
        return this.bounds.isOverlap(point.getX(), point.getY(), this.size);
    }

    boolean isOverlapNormalized(Point point)
    {
        return this.bounds.isOverlapNormalized(point.getX(), point.getY(), this.size);
    }

    boolean hasData()
    {
        return image != null;
    }
}
