package group9.RandomCollageGenerator;

import java.awt.*;

/**
 * Bounds class's purpose is to store positional values, width values, and to store positions
 * relative to the nearest width - i.e if x position is 120 and width is 100, x normalised is 100
 * <p>
 * Class also provides simple AABB collision detection methods
 */
public class Bounds {
    private int xPosition1, yPosition1, xPosition2, yPosition2;
    // following positions are normalized to the nearest width i.e if width is 100, and position x is
    // 120, position x normalized is 100
    private int xNormalizedPosition1, xNormalizedPosition2, yNormalizedPosition1, yNormalizedPosition2;
    private Dimension size;

    Bounds(int xPosition1, int x2, int yPosition1, int yPosition2) {
        this.xPosition1 = xPosition1;
        this.xPosition2 = x2;
        this.yPosition1 = yPosition1;
        this.yPosition2 = yPosition2;
        this.size = new Dimension(x2 - xPosition1, yPosition2 - yPosition1);
        setNormalizedXPositions();
        setNormalizedYPositions();
    }

    Bounds(Point point, Dimension size) {
        this.xPosition1 = point.getX();
        this.yPosition1 = point.getY();
        this.xPosition2 = xPosition1 + size.width;
        this.yPosition2 = yPosition1 + size.height;
        this.size = size;
        setNormalizedXPositions();
        setNormalizedYPositions();
    }

    // gets normalized bounds
    Bounds(int x, int y, Dimension size) {
        this.xPosition1 = x;
        this.xPosition2 = x + size.width;
        this.yPosition1 = y;
        this.yPosition2 = y + size.height;
        this.size = size;
        setNormalizedXPositions();
        setNormalizedYPositions();
    }

    private void setNormalizedXPositions() {
        int pointsBeginXMod = xPosition1 / this.size.width;
        int boundsXMin = pointsBeginXMod * this.size.width;
        this.xNormalizedPosition1 = boundsXMin;
        this.xNormalizedPosition2 = boundsXMin + this.size.width;
    }

    private void setNormalizedYPositions() {
        int pointsBeginYMod = yPosition1 / this.size.height;
        int boundsYMin = pointsBeginYMod * this.size.height;
        this.yNormalizedPosition1 = boundsYMin;
        this.yNormalizedPosition2 = boundsYMin + this.size.height;
    }

    public boolean isOverlap(int x, int y, Dimension size) {
        Bounds otherBounds = new Bounds(x, y, size);
        return isOverlap(otherBounds);
    }

    public boolean isOverlap(Bounds other) {
        return this.xPosition1 < other.xPosition2 &&
                this.xPosition2 > other.xPosition1 &&
                this.yPosition1 < other.yPosition2 &&
                this.yPosition2 > other.yPosition1;
    }

    public boolean isOverlapNormalized(int x, int y, Dimension size) {
        Bounds otherBounds = new Bounds(x, y, size);
        return isOverlapNormalized(otherBounds);
    }

    public boolean isOverlapNormalized(Bounds other) {
        return this.xNormalizedPosition1 < other.xNormalizedPosition2 &&
                this.xNormalizedPosition2 > other.xNormalizedPosition1 &&
                this.yNormalizedPosition1 < other.yNormalizedPosition2 &&
                this.yNormalizedPosition2 > other.yNormalizedPosition1;
    }

    public int getxPosition1() {
        return xPosition1;
    }

    public int getxPosition2() {
        return xPosition2;
    }

    public int getyPosition1() {
        return yPosition1;
    }

    public int getyPosition2() {
        return yPosition2;
    }

    public int getxNormalizedPosition1() {
        return xNormalizedPosition1;
    }

    public int getxNormalizedPosition2() {
        return xNormalizedPosition2;
    }

    public int getyNormalizedPosition1() {
        return yNormalizedPosition1;
    }

    public int getyNormalizedPosition2() {
        return yNormalizedPosition2;
    }

    public int getWidth() {
        return size.width;
    }

    public int getHeight() {
        return size.height;
    }

    public Dimension getSize() {
        return size;
    }
}
