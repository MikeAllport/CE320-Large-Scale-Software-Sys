package group9.ButtonHandling;

import group9.GridCollageGenerator.Collage;
import group9.Piccollage;
import java.awt.color.ColorSpace;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.awt.image.BufferedImageOp;
import java.awt.image.ColorConvertOp;

public class ConversionToGreyscaleButtonHandler implements ActionListener {

    Piccollage theApp;

    public ConversionToGreyscaleButtonHandler(Piccollage theApp)
    {
        this.theApp = theApp;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        Collage collage = theApp.getGeneratedCollages().get(theApp.getCollagePage().getCollagePreviewIndex());
        collage.setType(BufferedImage.TYPE_BYTE_GRAY);
        theApp.getCollagePage().setCollagePreviewImage(0);
    }

    //not required for this class to work successfully but is required for a Junit test so don't remove
    public static BufferedImage convertImageToBlackWhite(BufferedImage image) {
        BufferedImageOp bufferedImageOp = new ColorConvertOp(ColorSpace.getInstance(ColorSpace.CS_GRAY), null);
        BufferedImage convertedImage = bufferedImageOp.filter(image, null);
        convertedImage.createGraphics();
        return convertedImage;
    }
}