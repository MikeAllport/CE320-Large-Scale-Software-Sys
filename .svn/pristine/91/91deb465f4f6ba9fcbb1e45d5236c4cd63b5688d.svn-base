package group9.button_handling;

import group9.CollageMakerApplication;
import group9.utils.Utils;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public class DisplaySelectedImageHandler implements ListSelectionListener {

    private final CollageMakerApplication theApp;
    private final JLabel image;
    private final JList<String> filesList;

    public DisplaySelectedImageHandler(CollageMakerApplication theApp, JLabel image, JList<String> filesList) {
        this.theApp = theApp;
        this.image = image;
        this.filesList = filesList;
    }

    public void valueChanged(ListSelectionEvent e) {
        try {
            if(e.getValueIsAdjusting()) {
                File f = theApp.getFileFromName(filesList.getSelectedValue());
                BufferedImage img = ImageIO.read(f);
                ImageIcon testIcon = new ImageIcon(Utils.rescaleIcon(img, 600, 600));
                image.setIcon(testIcon);
            }
            image.updateUI();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
}
